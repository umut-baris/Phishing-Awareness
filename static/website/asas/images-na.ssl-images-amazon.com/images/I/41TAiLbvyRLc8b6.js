P.register("cvfVersion",function(){return{version:"0.1.0.0-2022-11-10"}});"use strict";
P.when("A","cvfFormDataGenerator","ready").register("cvf-account-switcher",function(a,e){function b(c,b){c.preventDefault();var k=e.retrieveFormData(c.target),d=k.inputData.serializeArray();d.push(n(c.target));a.ajax(window.location.protocol+"//"+window.location.host+k.requestPath,{method:"POST",params:d,success:b,error:f})}function n(a){a=c(a);var b=a.attr("name");b||(b=a.closest(".cvf-account-switcher-sign-out-link").attr("data-name"));var d=a.attr("value");d||(d=a.closest(".cvf-account-switcher-sign-out-link").attr("data-value"));
return{name:b,value:d}}function f(c,b,d){a.trigger(q.error,d)}function d(a){var b=/([^@\s]+)@([a-zA-Z0-9_-]+)(\.[a-zA-Z0-9._-]+)/ig.exec(a);if(null!==b){a=b[1];a=c.trim(a);var d=a.length;if(1!==d){for(var e=a.charAt(0),f=0;f<d-2;f++)e+="*";a=e+=a.charAt(d-1)}a+="@";e=b[2];e=c.trim(e);d=e.length;e=e.charAt(0);for(f=0;f<d-1;f++)e+="*";return a+e+b[3]}b=c.trim(a);a=b.length;if(!(4>=a)){d="";for(e=0;e<a-4;e++)d+="*";b=d+b.substr(a-4,a-1)}return b}function g(){0===c(".cvf-account-switcher-check-mark:visible").length&&
(c(".cvf-account-switcher-check-mark-area").remove(),c(".cvf-account-switcher-profile-details").toggleClass("cvf-account-switcher-profile-details cvf-account-switcher-profile-details-after-account-removed"))}var c=a.$,q={success:"cvf:account_switcher:success",error:"cvf:account_switcher:error"};(function(){var a=c("#ap-account-switcher-container")[0],b=window.MutationObserver||window.WebKitMutationObserver;if(void 0!==a&&void 0!==b){var d=new b(function(a){for(var b=0;b<a.length;b++)if(null!==a[b].addedNodes){g();
d.disconnect();break}});d.observe(a,{attributes:!0,childList:!0,characterData:!0,subtree:!0})}})();(function(){c(".cvf-account-switcher-sign-out-link").live("click",function(e){b(e,function(b){if(b.redirectUrl)window.location=b.redirectUrl,a.trigger("cvf:account_switcher","redirectOnSignOut");else if(b.succeeded){var f="."+c(e.target).attr("class").match(/cvf-account-switcher-account-group-\w+/g)[0];c(f+"-hide").hide();c(f+"-name").text(c("#cvf-account-switcher-sign-out-replace-text").text());c(f+
"-claim").text(d(c(f+"-claim").text()));c(f+"-image").replaceWith(c("\x3cdiv /\x3e").append(c("#cvf-account-switcher-sign-out-replace-image").clone().removeClass("cvf-hidden")).html());c(f+"-button").removeClass("cvf-widget-btn-val cvf-widget-btn-verify-account-switcher");b=b.switchedAccountId;void 0!==b&&c(".cvf-account-switcher-account-group-"+b+"-check-mark").show();g();window.location.reload()}else a.trigger(q.error,b)})})})()});P.register("a-sheet-wrapper",function(){return null});"use strict";
P.when("A","cvfFormDataGenerator","ready").register("cvfCaptcha",function(a,e){a=a.$;0===a(".cvf-widget-input-captcha").children("input").length?(a(".cvf-widget-input-captcha").attr("autocapitalize","off"),a(".cvf-widget-input-captcha").attr("autocorrect","off")):(a(".cvf-widget-input-captcha").children("input").attr("autocapitalize","off"),a(".cvf-widget-input-captcha").children("input").attr("autocorrect","off"))});"use strict";
P.when("A").register("cvf-client-side-counters-util",function(a){function e(b,a){var e=window.ue;e&&"function"===typeof e.count&&(a||(a=(e.count(b)||0)+1),e.count(b,a))}return{incrementCounter:function(a){e(a)},insertCounter:e}});
P.when("A","3p-promise","a-sheet-wrapper","a-spinner","a-alert","codeResendTimer","cvf-client-side-counters-util","sms-retriever-handler","ready").execute("client-sms-request-controller",function(a,e,b,n,f,d,g,c){function q(){var c=b.create({name:"auto_verify_bottom_sheet",preloadDomId:"codeAutoVerifySheetContent",inlineContent:"content",closeType:"message",closeMessage:r.closeMessage,height:250});b.showSheet(c);g.incrementCounter(t.SHOW_BOTTOM_SHEET);var d=k(c);a.on("a:sheet:beforeHide:auto_verify_bottom_sheet",
function(){clearTimeout(d);var a=l("#cvf-auto-read-status");a.val()!==m.SHEET_TIMEOUT&&(g.incrementCounter(t.CANCEL_BOTTOM_SHEET),a.val(m.SHEET_CANCELLED))})}function u(){var a=n("#cvf-input-spinner");a.show();g.incrementCounter(t.SHOW_INPUT_SPINNER);var b=k(a);l("#cvf-input-code")[0].onkeypress=function(){clearTimeout(b);n("#cvf-input-spinner").hide();var a=l("#cvf-auto-read-status");a.val()!==m.SPINNER_TIMEOUT&&(g.incrementCounter(t.CANCEL_INPUT_SPINNER),a.val(m.SPINNER_CANCELLED))}}function k(a){return setTimeout(function(){var c=
l("#cvf-auto-read-status");"auto_verify_bottom_sheet"===a._name?(b.hideSheet(a),g.incrementCounter(t.BOTTOM_SHEET_TIMEOUT),c.val(m.SHEET_TIMEOUT)):(l("#cvf-input-code").trigger("keypress"),g.incrementCounter(t.INPUT_SPINNER_TIMEOUT),c.val(m.SPINNER_TIMEOUT));f("#auto-verify-failed-alert").show()},3E4)}function p(a){w=a;a=l("#cvf-auto-read-status");"T1"===x?a.val()!==m.SHEET_TIMEOUT&&a.val()!==m.SHEET_CANCELLED&&(a=w,l("#cvf-hidden-input-code").val(a),l("#cvf-auto-read-status").val(m.SHEET_SUCCESS),
z.submit()):"T2"===x&&a.val()!==m.SPINNER_TIMEOUT&&a.val()!==m.SPINNER_CANCELLED&&(a=w,l("#cvf-input-code").val(a),l("#cvf-auto-read-status").val(m.SPINNER_SUCCESS),z.submit())}function y(a){d.createTimer(Number(a.timeRemaining),l("#resend-timer-message-id").val(),l("#resend-timer-complete-id").val().replace(/"/g,""),"timer","timer",!1);a=l("#wait-resend-auto-read");a.submit(function(a){a.preventDefault()});l(".wait-one-minute-continue").click(function(){h.location.reload()});a.removeClass("aok-hidden");
z.addClass("aok-hidden")}function B(){f("#otp-request-failed-alert").show();l("#cvf-input-code").attr("disabled","disabled").addClass("a-form-disabled");l("#cvf-submit-otp-button").addClass("a-button-disabled");l("#cvf-resend-link").unbind().click(function(){h.location.reload()})}function A(b){a.get(b,{success:function(a){if(a.wait)g.incrementCounter(t.WAIT_RESEND),y(a);else if(a.redirect)g.incrementCounter(t.REDIRECT),h.location.replace(a.redirect);else{var b=a.smsFormat;b?(g.incrementCounter(t.RECEIVED_FORMAT+
":"+b),"androidAutoReadSmsWithAppHash"===b&&(x=a.sendSmsSupportingAndroidSmsRetrieverTreatment,"T1"===x?q():"T2"===x&&u(),w&&p(w))):(g.incrementCounter(t.FORMAT_NOT_RECEIVED),console.error("Failed to receive sms format"))}},error:function(a,b,c){g.incrementCounter(t.AJAX_SMS_REQUEST_FAILED+":"+c);B();console.error("Ajax request failed",c)}})}var l=a.$,h=this;c=[c];var m=Object.freeze({SHEET_SUCCESS:"bottomSheetSuccess",SHEET_CANCELLED:"bottomSheetCancelled",SHEET_TIMEOUT:"bottomSheetTimeout",SPINNER_SUCCESS:"inputSpinnerSuccess",
SPINNER_CANCELLED:"inputSpinnerCancelled",SPINNER_TIMEOUT:"inputSpinnerTimeout"}),t=Object.freeze({SHOW_BOTTOM_SHEET:"OTPAutoReadShowBottomSheet",SHOW_INPUT_SPINNER:"OTPAutoReadShowInputSpinner",CANCEL_BOTTOM_SHEET:"OTPAutoReadCancelBottomSheetForManualInput",CANCEL_INPUT_SPINNER:"OTPAutoReadCancelInputSpinnerForManualInput",BOTTOM_SHEET_TIMEOUT:"OTPAutoReadBottomSheetTimeout",INPUT_SPINNER_TIMEOUT:"OTPAutoReadInputSpinnerTimeout",RECEIVED_FORMAT:"OTPAutoReadReceivedFormat",FORMAT_NOT_RECEIVED:"OTPAutoReadFormatNotReceived",
REDIRECT:"OTPAutoReadClientRedirect",AJAX_SMS_REQUEST_FAILED:"OTPAutoReadAjaxSmsRequestFailed",WAIT_RESEND:"OTPAutoReadWaitResend"}),r=a.state("autoReadAttrs");if(r&&r.isClientDrivenOtpSendingEnabled){var v=r.arbParam;if(v){var z=l("#verification-code-form");if(0!==z.length){var w=null,x=null;b?(c=c.map(function(a){return a.isEnabled().then(function(b){return b?a.registerListener(p).then(function(a){return a}):{}})}),e.all(c).then(function(a){var b=[],c={};a.forEach(function(a){a.handlerCapability&&
b.push(a.handlerCapability);a.handlerQueryParams&&l.extend(c,a.handlerQueryParams)});a={arb:v,mode:"page_ajax",sendClientDrivenOtp:!0,capabilities:b.join()};l.extend(a,c);a=h.location.origin+"/ap/cvf/request?"+l.param(a);A(a)})):(e=h.location.origin+"/ap/cvf/request?"+l.param({arb:v,mode:"page_ajax",sendClientDrivenOtp:!0}),A(e))}}}});"use strict";
P.when("A","ready").register("codeResendTimer",function(a){function e(b,e,f,d,g,c){var q=(new Date).getTime(),n=setInterval(function(){var k=(new Date).getTime()-q,p=b-k;0>=p?(clearInterval(n),c?(a.$("#"+d).hide(),a.$("#"+g).removeClass("cvf-resend-link-disabled"),a.$("#"+g).show()):a.$("#"+g).html(f)):(k=e.split(" +timeleft+ "),c?(p=(new Date(p)).toISOString().slice(14,19),k=k[0].split('"').join("")+p+k[1].split('"').join("")):k=k[0].split('"').join("")+Math.floor(p/1E3)+k[1].split('"').join(""),
a.$("#"+d).html(k))},100)}return{createTimer:function(a,n,f,d,g,c){return new e(a,n,f,d,g,c)}}});"use strict";P.when("A","cvfFormDataGenerator","ready").execute(function(a,e){var b=a.$;b(".cvf-widget-btn-val").click(function(a){var f=b(a.target).closest(".cvf-widget-form");a=e.getNameValue(b(a.target));f.append('\x3cinput type\x3d"hidden" name\x3d"'+a.name+'" value\x3d"'+a.value+'"\x3e').submit()})});"use strict";
P.when("A","cvfVersion","cvfFormDataGenerator","ready").register("cvf",function(a,e,b){function n(f){function q(b){"string"===typeof h.options.widgetMetricsScope&&"function"===typeof window.uet&&window.uex("ld",h.options.widgetMetricsScope,{wb:1});h.options.spinnerTarget&&h.options.spinnerTarget.hide();if(b.hasOwnProperty("error"))a.trigger(m.error,b.error);else if(b.redirectUrl)window.location=b.redirectUrl;else if(b.redirect)a.trigger(m.success,b.token,b.status,b.redirect),h.options.autoDestroy?
h.destroy():(d(".cvf-widget-alert").hide(),b.status?d(".cvf-widget-status-success").show():d(".cvf-widget-status-error").show(),l()),a.trigger("cvf:verification:complete",b.status),r.find(".cvf-widget-btn").unbind("click",k),r.find(".cvf-widget-btn-val").unbind("click",k),a.off(m.success),a.off(m.error);else{r.html(b.replace(/<form/g,"\x3cdiv").replace(/<\/form/g,"\x3c/div"));var c=d(".cvf-widget-form-keep").clone().empty();b=d(".cvf-widget-form-keep").children().clone(!0,!0);c=(new String(c.prop("outerHTML"))).replace(/<div/g,
"\x3cform").replace(/<\/div/g,"\x3c/form");d(".cvf-widget-form-keep").replaceWith(c);d(".cvf-widget-form-keep").html(b);y()}}function k(c,e){c.preventDefault();d(".cvf-widget-alert").hide();h.options.spinnerTarget&&h.options.spinnerTarget.show();var f=b.retrieveFormData(c.target),k=f.inputData.serializeArray();e&&k.push(b.getNameValue(c.target));a.ajax(t+f.requestPath,{method:"POST",params:k,success:q,error:A})}function n(a){13===a.keyCode&&k(a)}function y(){r.find(".cvf-widget-btn").click(function(a){k(a,
!1)});r.find(".cvf-widget-btn-val").click(function(a){k(a,!0)});r.find('input[name\x3d"code"]').focus().keypress(n);r.find(".cvf-widget-v2-link-resend").click(function(a){d("#cvf-resend-link").hasClass("cvf-resend-link-disabled")||k(a,!1)})}function B(b){return function(c,d,e){"timeout"!==d||3<=v?a.trigger(m.error,e):a.delay(b,10*v++)}}function A(b,c,d){h.options.spinnerTarget&&h.options.spinnerTarget.hide();a.trigger(m.error,d)}function l(){d.each(r.find("input"),function(a,b){a=d(b);a.attr("disabled",
"disabled");a.hasClass("a-input-text")?a.addClass("a-form-disabled"):a.hasClass("a-button-input")?a.closest(".a-button").addClass("a-button-disabled"):a.closest(".a-input-text-wrapper").length&&a.closest(".a-input-text-wrapper").addClass("a-form-disabled")});d.each(r.find("a"),function(a,b){a=d(b);a.hasClass("cvf-widget-link-disable-target")&&a.addClass("cvf-link-disabled")})}var h=this;c++;var m={success:"cvf:"+c+":success",error:"cvf:"+c+":error"};h.options={};d.extend(h.options,g,f);(function(a){if(1!==
d(a.target).length)throw Error("The CVF widget requires a unique element.");if(!d.isFunction(a.onSuccess))throw Error("The CVF widget requires a success callback function.");if(!d.isFunction(a.onError))throw Error("The CVF widget requires an error callback function.");})(h.options);var t=h.options.server,r=d(h.options.target);a.on(m.success,h.options.onSuccess);a.on(m.error,h.options.onError);h.start=function(){if(0===d.trim(h.options.requestToken).length)throw Error("The CVF widget requires a request token.");
var b=t+"/ap/cvf/request.embed",c=h.options.requestToken,f=h.options.requestArbToken,k=h.options.associationHandle,g=h.options.language,n=0===d.trim(f).length,l=0!==d.trim(k).length,m=0!==d.trim(g).length,p={};n?p.requestToken=c:p.arb=f;p.CVFVersion=e.version;p.AUIVersion=P.AUI_BUILD_DATE;m&&(p.language=g);l&&(p["openid.assoc_handle"]=k);"string"===typeof h.options.widgetMetricsScope&&"function"===typeof window.uet&&window.uet("bb",h.options.widgetMetricsScope,{wb:1});a.ajax(b,{method:"GET",params:p,
success:q,error:B(h.start)})};h.destroy=function(){r.html("")};y();var v=0;h.options.autoStart&&h.start()}function f(a){return new n(a)}var d=a.$,g={server:"",target:void 0,requestToken:void 0,requestArbToken:void 0,onSuccess:void 0,onError:void 0,spinnerTarget:void 0,autoStart:!0,autoDestroy:!0,widgetMetricsScope:void 0,associationHandle:void 0,language:void 0},c=0;a.on("cvf:verification:request",function(b){var c=d("#"+b),e=c.data("token"),g=c.data("spinnerId");g=d("#"+g);f({target:c,spinnerTarget:g,
requestToken:e,onSuccess:function(c,d,e){a.trigger("cvf:verification:complete:"+b,c,d,e)},onError:function(c){a.trigger("cvf:verification:error:"+b,c)},autoStart:!0,autoDestroy:!1})});return{create:f}});"use strict";
P.when("A","ready").register("cvfFormDataGenerator",function(a){var e=a.$;return{retrieveFormData:function(a){a=e(a).closest(".cvf-widget-form");return{requestPath:a.data("use-only-form-action")?a.attr("action"):"/ap/cvf/"+a.attr("action")+".embed",inputData:a.find(".cvf-widget-input,.cvf-widget-hidden-fields,.cvf-widget-input :input"),form:a}},getNameValue:function(a){a=e(a);var b=a.attr("name");b||(b=a.closest(".cvf-widget-btn-val").attr("data-name"));var f=a.attr("value");f||(f=a.closest(".cvf-widget-btn-val").attr("data-value"));
return{name:b,value:f}}}});"use strict";P.when("A","cvf","ready").execute(function(a,e){var b=a.$;b(document).ready(function(){function a(a,b,c){window.location=c;console.log("Client Side: "+a)}function f(a){console.log(a)}var d=b(".cvf-widget-spinner"),g=b("#cvf-widget-content");if(1===g.length){var c=b('[name\x3d"requestToken"]').first().attr("value");e.create({target:g,spinnerTarget:d,requestToken:c,onSuccess:a,onError:f,autoStart:!1})}})});"use strict";
P.when("A","ready").register("phoneFormField",function(a){function e(){a:{for(var a=b("select[name\x3d'cvf_phone_cc']").val()||"",d=0;d<n.length;d++){var e=n[d];if(a.toUpperCase()===e){b("#mobileClaimDisclosureMessage").removeClass("a-hidden aok-hidden").show();b("#mobileClaimDisclosureMessageRelaxed").addClass("aok-hidden").hide();break a}}b("#mobileClaimDisclosureMessageRelaxed").removeClass("a-hidden aok-hidden").show();b("#mobileClaimDisclosureMessage").addClass("aok-hidden").hide()}}var b=a.$,
n=["US","CA","FR"];0<b("select[name\x3d'cvf_phone_cc']").length&&0<b("#mobileClaimDisclosureMessage").length&&0<b("#mobileClaimDisclosureMessageRelaxed").length&&(e(),b("select[name\x3d'cvf_phone_cc']").change(e))});"use strict";P.when("A").execute(function(a){a.declarative("auth-popup","click",function(a){var b=a.data;a=a.$target.closest("a")[0];(b=window.open(a.href,a.target,b.windowOptions))&&b.focus()})});
P.register("android-sms-otp-parser",function(){return{parseOtpCode:function(a){if(a&&(a=a.match(/(([\s\S]*[^0-9])|(^))([0-9]{4,6})[^0-9][\s\S]*[a-zA-Z0-9+\\\/]{11}/)||[],0<a.length))return a[4]}}});
P.when("A","mobile-auth-platform","3p-promise","android-sms-otp-parser","cvf-client-side-counters-util","ready").register("sms-retriever-handler",function(a,e,b,n,f){function d(a){(q=a.isSupported)?f.incrementCounter(c.ENABLED):f.incrementCounter(c.DISABLED);u={appHash:a.appHash}}function g(){return new b(function(a){u?a(u):e.isSmsRetrieverEnabled(function(b){d(b);a(u)})})}var c=Object.freeze({ENABLED:"SmsRetrieverEnabled",DISABLED:"SmsRetrieverDisabled",SMS_LISTENER_FAILED:"SmsRetrieverListenerFailedToRegister",
RECEIVED_INVALID_SMS:"SmsRetrieverListenerReceivedInvalidSms",RECEIVED_VALID_SMS:"SmsRetrieverListenerReceivedValidSms"}),q=null,u=null;return{isEnabled:function(){return new b(function(a){null!==q?a(q):e.isSmsRetrieverEnabled(function(b){d(b);a(q)})})},registerListener:function(a){return new b(function(b){e.registerMAPSmsReceiver(function(b){b.isRegistered?(b=n.parseOtpCode(b.sms))?(f.incrementCounter(c.RECEIVED_VALID_SMS),a(b)):f.incrementCounter(c.RECEIVED_INVALID_SMS):f.incrementCounter(c.SMS_LISTENER_FAILED)});
g().then(function(a){q?b({handlerCapability:"smsRetriever",handlerQueryParams:a}):b({})})})}}});"use strict";
P.when("A","a-spinner","ready").execute(function(a,e){function b(){d(".otp-input-box").attr("disabled","disabled");d("input[name\x3d'code']").val(n());(null!==d(".otp-input-box-container").data("isembed")?d(".otp-input-box-container").data("isembed"):1)?d(".cvf-widget-btn-verify").click():(a.capabilities.isAmazonApp||e("#otp-input-spinner").show(),d("#verification-code-form").submit())}function n(){var a="";d("input[name^\x3dotc]").each(function(b){a+=d(this).val()});return a}function f(){d(".cvf-widget-alert").is(":visible")&&
(d(".otp-input-box").removeClass("otp-input-box-alert"),d(".cvf-widget-alert").hide())}var d=a.$,g=/^\d+$/;a.declarative("otp-inputbox-handler","focusin",function(a){a=a.$target;a.is(".otp-input-box")&&(a.attr("name").match("otc-1")||""===a.prev().val()&&a.prev().focus())});a.declarative("otp-inputbox-handler","keyup",function(a){var c=a.$event;a=a.$target;a.is(".otp-input-box")&&(c=c.which||c.keyCode,-1===[16,9,224,18,17].indexOf(c))&&(-1!==[8,37,46].indexOf(c)?a.prev()&&!a.attr("name").match("otc-1")&&
(a.val(""),a.prev().select()):g.test(a.val())?a.attr("name").match("otc-6")?b():a.next()&&(f(),a.next().select()):a.val(""))});d(".otp-input-box").live("input",function(a){a=d(a.target);var c=a.val();f();if(1!==c.length)for(var e=0;e<c.length;e++){a.val(c.charAt(e));if(a.attr("name").match("otc-6")){b();break}a=a.next();a.focus()}});a.declarative("otp-inputbox-handler","click",function(){d("input[name^\x3dotc]").each(function(a){""===d(this).val()&&d(this).focus()})})});